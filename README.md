# Распознавание корректно заполненных согласий на обработку персональных данных 
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](https://opensource.org/licenses/MIT)

## Описание проекта
Данная утилита определяет является ли присланная пользователем форма согласия на обработку персональных данных корректно заполненной.

### Этапы работы утилиты
1. Попытка развернуть присланную форму так, чтобы она совпадала с шаблонной формой.
2. Определение того, на сколько совпадают присланная пользователем форма и исходная. 
3. Анализ каждого поля в присланной форме на предмет того, является ли оно заполненным.
4. Распределение на три категории, учитывая полученные на предыдущих этапах данные

### Три категории, о которых идет речь выше
1. Скорее всего некорректное согласие. Сразу отправляется реакция пользователю.
2. На проверку модератору - нельзя с уверенностью определить, к какой группе относится согласие.
3. Скорее всего корректное согласие.

### Структура кода
1. utils.py - отвечает за короткие функции помощники 
2. image_class.py - там хранится логика работы с присланным пользователем согласием
3. template_class.py - логика работы с template образом - пустой формой
4. conrec_class.py - логика работы модели и поиска оптимальных параметров 
5. recognition.py - работа с уже развернутым изображением, оценка того, на сколько оно корректно заполнено.
6. alignment.py - разворачивание изображения, для приведения его к стандартному виду
7. orb_utils.py - работа с orb фичами

Отдельно выделен файл main.py, набор функций, которые инициируют работу, позволяет удобно управлять всей системой.

В папке docker_stuff находятся файлы связанные с docker. Ссылка на уже готовый образ - https://hub.docker.com/repository/docker/azarenkovg/kruzhok. 

В папке sogl_folder находятся шаблоны
  - sogl{номер формы}_image.jpg - шаблон согласия.
  - sogl{номер формы}_orb.pickle - предпросчитанные orb keypoints для последующего использования. Позволяет ускорить время работы скрипта. При необходимости можно рассчитывать их "на ходу".
  - sogl{номер формы}_fields.json - файл с полями для анализа форма [["Название поля", (y2, y1), (x2, x1)], ...]
  - sogl{номер формы}_stop_sha256.json - самые популярные хэши присланных согласий - для мгновенного их отбрасывания.

### Используемые библиотеки
  - opencv
  - numpy
  - poppler
  - pdf2image
  - imutils

### Команда
Азаренков Георгий https://github.com/azarenkovgd

Владислав Ковалев https://github.com/VladKovalevv